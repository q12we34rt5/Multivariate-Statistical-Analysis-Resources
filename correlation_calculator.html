<!DOCTYPE html>
<html>

<head>
    <meta charset='UTF-8'>
    <title>CSS/Js Calc</title>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
    <style type='text/css'>
        body {
            margin: 0px;
        }

        #calc-panel {
            --digit-size: 30px;
            --sep: 10px;
            background-color: #091921;
            display: flex;
            flex-direction: column;
            position: absolute;
            padding: 20px;
        }

        #input-eval-div {
            background-color: #091921;
            display: flex;
        }

        #input-div {
            height: calc(2.5 * var(--digit-size));
            display: flex;
            flex-direction: column;
            background-color: #091921;
        }

        #input-div>input {
            width: calc(var(--digit-size) * 20);
            height: var(--digit-size);
            margin: auto;
            color: white;
            font-size: var(--digit-size);
            font-family: 'Inconsolata';
            background-color: #091921;
            border: 2px solid #091921;
            border-radius: 20px;
            box-shadow:
                -5px -5px 5px rgba(255, 255, 255, 0.05),
                inset -5px -5px 5px rgba(255, 255, 255, 0.05),
                5px 5px 5px rgba(0, 0, 0, 0.3),
                inset 5px 5px 5px rgba(0, 0, 0, 0.3);
        }

        #input-div>input:focus {
            outline: none;
        }

        #evaluate {
            width: calc(2.5 * var(--digit-size));
            height: calc(2.5 * var(--digit-size));
            margin-left: 10px;
            color: white;
            font-size: var(--digit-size);
            font-family: 'Inconsolata';
            background-color: #091921;
            border: 2px solid #091921;
            border-radius: 10px;
            box-shadow:
                -5px -5px 5px rgba(255, 255, 255, 0.05),
                5px 5px 5px rgba(0, 0, 0, 0.3);
        }

        #evaluate:hover {
            box-shadow:
                -5px -5px 5px rgba(255, 255, 255, 0.05),
                inset -5px -5px 5px rgba(255, 255, 255, 0.05),
                5px 5px 5px rgba(0, 0, 0, 0.3),
                inset 5px 5px 5px rgba(0, 0, 0, 0.3);
        }

        #corr-display {
            width: calc(var(--digit-size) * 22.8);
            height: var(--digit-size);
            margin-top: 10px;
            color: white;
            font-size: var(--digit-size);
            font-family: 'Inconsolata';
            background-color: #091921;
            border: 2px solid #091921;
            border-radius: 20px;
            box-shadow:
                -5px -5px 5px rgba(255, 255, 255, 0.05),
                inset -5px -5px 5px rgba(255, 255, 255, 0.05),
                5px 5px 5px rgba(0, 0, 0, 0.3),
                inset 5px 5px 5px rgba(0, 0, 0, 0.3);
        }

        #corr-display {
            outline: none;
        }
    </style>
</head>

<body>

    <div id='calc-panel'>
        <div id='input-eval-div'>
            <div id='input-div'>
                <input id='order1' type='text'>
                <input id='order2' type='text'>
            </div>
            <button id='evaluate' onclick='input()'>Eval</button>
        </div>
        <input id='corr-display' type='text' readonly value='Correlation:'>
    </div>

    <script type='text/javascript'>
        var input1 = document.querySelector('#order1');
        var input2 = document.querySelector('#order2');
        var output = document.querySelector('#corr-display')
        function input() {
            var ord1 = input1.value.split(" ").map(item => parseInt(item, 10));
            var ord2 = input2.value.split(" ").map(item => parseInt(item, 10));
            output.value = 'Correlation: ' + pcorr(argsort(ord1), argsort(ord2));
        }
        function argsort(array) {
            const arrayObject = array.map((value, idx) => { return { value, idx }; });
            arrayObject.sort((a, b) => {
                if (a.value < b.value) {
                    return -1;
                }
                if (a.value > b.value) {
                    return 1;
                }
                return 0;
            });
            const argIndices = arrayObject.map(data => data.idx);
            return argIndices;
        }
        function pcorr(x, y) {
            let sumX = 0,
                sumY = 0,
                sumXY = 0,
                sumX2 = 0,
                sumY2 = 0;
            const minLength = x.length = y.length = Math.min(x.length, y.length),
                reduce = (xi, idx) => {
                    const yi = y[idx];
                    sumX += xi;
                    sumY += yi;
                    sumXY += xi * yi;
                    sumX2 += xi * xi;
                    sumY2 += yi * yi;
                }
            x.forEach(reduce);
            return (minLength * sumXY - sumX * sumY) / Math.sqrt((minLength * sumX2 - sumX * sumX) * (minLength * sumY2 - sumY * sumY));
        }
    </script>
</body>

</html>
